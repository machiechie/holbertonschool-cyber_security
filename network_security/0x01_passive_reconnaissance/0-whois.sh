#!/bin/bash
whois $1 | awk -F: 'function t(s){gsub(/^[ \t]+|[ \t]+$/,"",s);return s} /^Registrant Name/{print "Registrant Name,"t($2)} /^Registrant Organization/{print "Registrant Organization,"t($2)} /^Registrant Street/{print "Registrant Street,"t($2)" "} /^Registrant City/{print "Registrant City,"t($2)} /^Registrant State\/Province/{print "Registrant State/Province,"t($2)} /^Registrant Postal Code/{print "Registrant Postal Code,"t($2)} /^Registrant Country/{print "Registrant Country,"t($2)} /^Registrant Phone:/{print "Registrant Phone,"t($2)} /^Registrant Phone Ext/{print "Registrant Phone Ext:,"t($2)} /^Registrant Fax:/{print "Registrant Fax,"t($2)} /^Registrant Fax Ext/{print "Registrant Fax Ext:,"t($2)} /^Registrant Email/{print "Registrant Email,"t($2)} /^Admin Name/{print "Admin Name,"t($2)} /^Admin Organization/{print "Admin Organization,"t($2)} /^Admin Street/{print "Admin Street,"t($2)" "} /^Admin City/{print "Admin City,"t($2)} /^Admin State\/Province/{print "Admin State/Province,"t($2)} /^Admin Postal Code/{print "Admin Postal Code,"t($2)} /^Admin Country/{print "Admin Country,"t($2)} /^Admin Phone:/{print "Admin Phone,"t($2)} /^Admin Phone Ext/{print "Admin Phone Ext:,"t($2)} /^Admin Fax:/{print "Admin Fax,"t($2)} /^Admin Fax Ext/{print "Admin Fax Ext:,"t($2)} /^Admin Email/{print "Admin Email,"t($2)} /^Tech Name/{print "Tech Name,"t($2)} /^Tech Organization/{print "Tech Organization,"t($2)} /^Tech Street/{print "Tech Street,"t($2)" "} /^Tech City/{print "Tech City,"t($2)} /^Tech State\/Province/{print "Tech State/Province,"t($2)} /^Tech Postal Code/{print "Tech Postal Code,"t($2)} /^Tech Country/{print "Tech Country,"t($2)} /^Tech Phone:/{print "Tech Phone,"t($2)} /^Tech Phone Ext/{print "Tech Phone Ext:,"t($2)} /^Tech Fax:/{print "Tech Fax,"t($2)} /^Tech Fax Ext/{print "Tech Fax Ext:,"t($2)} /^Tech Email/{print "Tech Email,"t($2)}' > $1.csv
